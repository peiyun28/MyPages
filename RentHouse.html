<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>桃園租屋去</title>
    <!-- 引入 Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 引入 React 和 ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <!-- 引入 Babel 用於解析 JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        body {
            font-family: 'Segoe UI', 'Microsoft JhengHei', sans-serif;
        }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in-up {
            animation: fadeInUp 0.4s ease-out forwards;
        }
        /* 自定義選取顏色 */
        ::selection {
            background: #D49A89;
            color: white;
        }
    </style>
</head>
<body class="bg-[#F9F7F0]">
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // --- 圖示元件 (SVG) ---
        const IconBase = ({ children, size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {children}
            </svg>
        );

        const Home = (props) => <IconBase {...props}><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></IconBase>;
        const CheckCircle = (props) => <IconBase {...props}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></IconBase>;
        const Plus = (props) => <IconBase {...props}><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></IconBase>;
        const Trash2 = (props) => <IconBase {...props}><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></IconBase>;
        const ExternalLink = (props) => <IconBase {...props}><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></IconBase>;
        const MapPin = (props) => <IconBase {...props}><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></IconBase>;
        const DollarSign = (props) => <IconBase {...props}><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></IconBase>;
        const Heart = (props) => <IconBase {...props}><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></IconBase>;
        const Edit3 = (props) => <IconBase {...props}><path d="M12 20h9"></path><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path></IconBase>;
        const Pencil = (props) => <IconBase {...props}><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path></IconBase>;
        const Save = (props) => <IconBase {...props}><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline></IconBase>;
        const X = (props) => <IconBase {...props}><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></IconBase>;

        // --- 主程式元件 ---
        const RentalPlanner = () => {
            const [activeTab, setActiveTab] = useState('needs'); 
            
            // 預設的需求清單
            const [needs, setNeeds] = useState([
                { id: 1, text: '租金 12,000 內', priority: 'high' },
                { id: 2, text: '獨立洗衣機 & 陽台', priority: 'high' },
                { id: 3, text: '離捷運站走路 10-15 min', priority: 'medium' },
                { id: 4, text: '有對外 / 落地窗', priority: 'high' },
                { id: 5, text: '有代收垃圾 & 包裹', priority: 'low' },
                { id: 6, text: '可租屋補助', priority: 'high' },
                { id: 7, text: '有電梯', priority: 'low' },

            ]);

            // 預設的房源資料
            const [listings, setListings] = useState([
                {
                id: 1,
                title: '南崁｜日和國際大亨',
                url: 'https://rent.591.com.tw/20115627', 
                price: 13500,
                location: '蘆竹區中正路27號',
                matches: [2, 4, 7], 
                note: '押金面議、有電梯',
                },
                {
                id: 2,
                title: '山鼻｜全新屋',
                url: 'https://rent.591.com.tw/19893736', 
                price: 19000,
                location: '蘆竹區山鼻路73號',
                matches: [2, 3, 5, 6, 7],
                note: '爆預算，但距離公司較近。配備75吋電視、300M網路/第四台/WIFI',
                },
                {
                id: 3,
                title: '南崁｜質感套房',
                url: 'https://rent.591.com.tw/20093036', 
                price: 9300,
                location: '蘆竹區南崁路',
                matches: [1, 2, 6],
                note: '最短租期一年，可隨時遷入。家俱家電全、水泥牆隔間、公共飲水機',
                },
                {
                id: 4,
                title: '山鼻｜新潤捷韻A10二期',
                url: 'https://rent.591.com.tw/20192065', 
                price: 16500,
                location: '蘆竹區機捷路二段999巷',
                matches: [2, 3, 4, 5, 7],
                note: '獨立陽台，衛浴乾溼分離、水泥隔間。租金含管理費，機車位500元/月可另租',
                },
                {
                id: 5,
                title: '青埔｜宜誠世界極',
                url: 'https://rent.591.com.tw/20218973', 
                price: 19000,
                location: '中壢區高鐵北路二段70號7樓',
                matches: [2, 3, 4, 5, 7],
                note: '社區美、附400M網路WiFi、LG洗脫烘、一房一廳陽台可開伙、汽車位另租每月2500元',
                },
                {
                id: 6,
                title: '青埔｜電梯套房',
                url: 'https://rent.591.com.tw/20177279', 
                price: 12500,
                location: '中壢區高鐵北路二段70號7樓',
                matches: [3, 4, 6, 7],
                note: '水費：每月100元、電費：5元/ 1度、車位：機車（每月+300元）',
                },
                {
                id: 7,
                title: '青埔｜電梯套房',
                url: 'https://rent.591.com.tw/20177279', 
                price: 12500,
                location: '中壢區高鐵北路二段70號7樓',
                matches: [3, 4, 6, 7],
                note: '水費：每月100元、電費：5元/ 1度、車位：機車（每月+300元）',
                },
                {
                id: 8,
                title: '青埔｜電梯套房',
                url: 'https://rent.591.com.tw/20177279', 
                price: 12500,
                location: '中壢區高鐵北路二段70號7樓',
                matches: [3, 4, 6, 7],
                note: '水費：每月100元、電費：5元/ 1度、車位：機車（每月+300元）',
                }
            ]);

            const [newNeed, setNewNeed] = useState('');
            const [newPriority, setNewPriority] = useState('high');
            const [isAddingListing, setIsAddingListing] = useState(false);
            const [newListing, setNewListing] = useState({ title: '', url: '', price: '', location: '', note: '' });

            // 需求編輯狀態
            const [editingNeedId, setEditingNeedId] = useState(null);
            const [editNeedText, setEditNeedText] = useState('');

            // 房源編輯狀態
            const [editingListingId, setEditingListingId] = useState(null);
            const [tempEditListing, setTempEditListing] = useState(null);

            // --- 需求相關功能 ---
            const handleAddNeed = () => {
                if (newNeed.trim()) {
                setNeeds([...needs, { id: Date.now(), text: newNeed, priority: newPriority }]);
                setNewNeed('');
                }
            };

            const handleDeleteNeed = (id) => {
                setNeeds(needs.filter(n => n.id !== id));
            };

            const startEditingNeed = (need) => {
                setEditingNeedId(need.id);
                setEditNeedText(need.text);
            };

            const saveEditNeed = (id) => {
                if (editNeedText.trim()) {
                setNeeds(needs.map(n => n.id === id ? { ...n, text: editNeedText } : n));
                }
                setEditingNeedId(null);
                setEditNeedText('');
            };

            // --- 房源相關功能 ---
            const handleAddListing = () => {
                if (newListing.title && newListing.price) {
                setListings([...listings, {
                    ...newListing,
                    id: Date.now(),
                    matches: [],
                    price: Number(newListing.price)
                }]);
                setIsAddingListing(false);
                setNewListing({ title: '', url: '', price: '', location: '', note: '' });
                }
            };

            const toggleMatch = (listingId, needId) => {
                setListings(listings.map(item => {
                if (item.id === listingId) {
                    const newMatches = item.matches.includes(needId)
                    ? item.matches.filter(id => id !== needId)
                    : [...item.matches, needId];
                    return { ...item, matches: newMatches };
                }
                return item;
                }));
            };

            const startEditingListing = (item) => {
                setEditingListingId(item.id);
                setTempEditListing({ ...item });
            };

            const saveEditListing = () => {
                if (tempEditListing && tempEditListing.title && tempEditListing.price) {
                    setListings(listings.map(item =>
                        item.id === editingListingId ? { ...tempEditListing, price: Number(tempEditListing.price) } : item
                    ));
                    setEditingListingId(null);
                    setTempEditListing(null);
                }
            };

            const cancelEditListing = () => {
                setEditingListingId(null);
                setTempEditListing(null);
            };

            return (
                <div className="min-h-screen bg-[#F9F7F0] font-sans text-[#5A5046] pb-20 selection:bg-[#D49A89] selection:text-white">
                
                {/* Header */}
                <div className="bg-gradient-to-r from-[#A95C51] to-[#D1A658] p-6 rounded-b-[40px] shadow-xl shadow-[#A95C51]/10 sticky top-0 z-10">
                    <h1 className="text-2xl font-bold text-[#F9F7F0] text-center drop-shadow-sm flex items-center justify-center gap-2 tracking-wide">
                    <Home className="w-6 h-6" />
                    2026/03 搬進桃園市！
                    </h1>
                    
                    <div className="flex justify-center gap-4 mt-6">
                    <button
                        onClick={() => setActiveTab('needs')}
                        className={`
                        px-6 py-2 rounded-full font-bold transition-all duration-300 flex items-center gap-2
                        ${activeTab === 'needs' 
                            ? 'bg-[#F9F7F0] text-[#A95C51] shadow-lg transform scale-105 ring-2 ring-[#F9F7F0]/50' 
                            : 'bg-[#F9F7F0]/20 text-[#F9F7F0] hover:bg-[#F9F7F0]/30'}
                        `}
                    >
                        <CheckCircle size={18} />
                        條件
                    </button>
                    <button
                        onClick={() => setActiveTab('compare')}
                        className={`
                        px-6 py-2 rounded-full font-bold transition-all duration-300 flex items-center gap-2
                        ${activeTab === 'compare' 
                            ? 'bg-[#F9F7F0] text-[#A95C51] shadow-lg transform scale-105 ring-2 ring-[#F9F7F0]/50' 
                            : 'bg-[#F9F7F0]/20 text-[#F9F7F0] hover:bg-[#F9F7F0]/30'}
                        `}
                    >
                        <Edit3 size={18} />
                        房源
                    </button>
                    </div>
                </div>

                {/* Main Content Area */}
                <div className="p-5 max-w-md mx-auto">
                    
                    {/* VIEW 1: 需求清單 */}
                    {activeTab === 'needs' && (
                    <div className="space-y-6 animate-fade-in-up">
                        <div className="bg-white p-6 rounded-3xl shadow-sm border border-[#E3D9C8]">
                        <h2 className="text-xl font-bold text-[#A95C51] mb-4 flex items-center">
                            <Heart className="w-5 h-5 mr-2" />
                            租屋需求列
                        </h2>
                        <div className="space-y-3">
                            {needs.map((need) => (
                            <div key={need.id} className="flex items-center justify-between group p-3 hover:bg-[#FAF5F3] rounded-xl transition-colors border border-transparent hover:border-[#E8DCCD]">
                                <div className="flex items-center gap-3 flex-1 overflow-hidden">
                                <span className={`flex-shrink-0 w-2.5 h-2.5 rounded-full ${need.priority === 'high' ? 'bg-[#A95C51]' : 'bg-[#9FA37E]'}`}></span>
                                
                                {editingNeedId === need.id ? (
                                    <input
                                    autoFocus
                                    type="text"
                                    value={editNeedText}
                                    onChange={(e) => setEditNeedText(e.target.value)}
                                    onBlur={() => saveEditNeed(need.id)}
                                    onKeyDown={(e) => e.key === 'Enter' && saveEditNeed(need.id)}
                                    className="flex-1 bg-white border border-[#D1A658] rounded px-2 py-1 text-lg text-[#5A5046] outline-none shadow-inner"
                                    />
                                ) : (
                                    <span 
                                    onClick={() => startEditingNeed(need)}
                                    className="text-lg text-[#5A5046] flex-1 cursor-pointer truncate flex items-center gap-2"
                                    >
                                    {need.text}
                                    <Pencil size={12} className="text-[#E3D9C8] opacity-0 group-hover:opacity-100 transition-opacity" />
                                    </span>
                                )}
                                </div>
                                
                                {editingNeedId !== need.id && (
                                <button onClick={() => handleDeleteNeed(need.id)} className="flex-shrink-0 ml-2 text-[#C4C4BC] hover:text-[#A95C51] transition-colors p-1">
                                    <Trash2 size={18} />
                                </button>
                                )}
                            </div>
                            ))}
                        </div>
                        
                        <div className="mt-6 pt-4 border-t border-[#F3F0E6]">
                            <div className="flex gap-2 mb-3">
                            <button 
                                onClick={() => setNewPriority('high')}
                                className={`flex-1 py-2 rounded-lg text-sm font-bold flex items-center justify-center gap-2 transition-all ${
                                newPriority === 'high' 
                                    ? 'bg-[#A95C51] text-white ring-2 ring-[#A95C51] ring-offset-1' 
                                    : 'bg-[#F3F0E6] text-[#A8A095] hover:bg-[#E8E0D0]'
                                }`}
                            >
                                <span className="w-2 h-2 rounded-full bg-current"></span>
                                必要
                            </button>
                            <button 
                                onClick={() => setNewPriority('low')}
                                className={`flex-1 py-2 rounded-lg text-sm font-bold flex items-center justify-center gap-2 transition-all ${
                                newPriority === 'low' 
                                    ? 'bg-[#9FA37E] text-white ring-2 ring-[#9FA37E] ring-offset-1' 
                                    : 'bg-[#F3F0E6] text-[#A8A095] hover:bg-[#E8E0D0]'
                                }`}
                            >
                                <span className="w-2 h-2 rounded-full bg-current"></span>
                                加分
                            </button>
                            </div>

                            <div className="flex gap-2">
                            <input
                                type="text"
                                value={newNeed}
                                onChange={(e) => setNewNeed(e.target.value)}
                                placeholder="輸入需求 (如: 浴室乾濕分離)"
                                className="flex-1 px-4 py-3 rounded-full bg-[#F3F0E6] border-none focus:ring-2 focus:ring-[#D1A658] outline-none text-[#5A5046] placeholder-[#A8A095]"
                                onKeyPress={(e) => e.key === 'Enter' && handleAddNeed()}
                            />
                            <button 
                                onClick={handleAddNeed}
                                className={`p-3 rounded-full shadow active:scale-95 transition-all text-white ${
                                newPriority === 'high' ? 'bg-[#A95C51] hover:bg-[#964B41]' : 'bg-[#9FA37E] hover:bg-[#8E9270]'
                                }`}
                            >
                                <Plus size={24} />
                            </button>
                            </div>
                        </div>
                        </div>

                        <div className="text-center text-xs text-[#999] tracking-wider">
                        * 點擊文字即可修改內容
                        </div>
                    </div>
                    )}

                    {/* VIEW 2: 房源比較 */}
                    {activeTab === 'compare' && (
                    <div className="space-y-6 animate-fade-in-up">
                        
                        {!isAddingListing ? (
                        <button 
                            onClick={() => setIsAddingListing(true)}
                            className="w-full py-4 rounded-2xl border-2 border-dashed border-[#C8B09C] text-[#A95C51] font-bold hover:bg-[#FAF5F3] hover:border-[#A95C51] transition-all flex items-center justify-center gap-2"
                        >
                            <Plus size={20} />
                            紀錄新房源
                        </button>
                        ) : (
                        <div className="bg-white p-5 rounded-3xl shadow-md border border-[#E3D9C8]">
                            <h3 className="font-bold text-lg mb-3 text-[#A95C51]">新增房源</h3>
                            <div className="space-y-3">
                            <input placeholder="標題 (例: xx路公寓)" className="w-full p-3 rounded-xl bg-[#F3F0E6] placeholder-[#A8A095] outline-none focus:ring-1 focus:ring-[#D1A658]" value={newListing.title} onChange={e => setNewListing({...newListing, title: e.target.value})} />
                            <input placeholder="租金 (數字)" type="number" className="w-full p-3 rounded-xl bg-[#F3F0E6] placeholder-[#A8A095] outline-none focus:ring-1 focus:ring-[#D1A658]" value={newListing.price} onChange={e => setNewListing({...newListing, price: e.target.value})} />
                            <input placeholder="地點" className="w-full p-3 rounded-xl bg-[#F3F0E6] placeholder-[#A8A095] outline-none focus:ring-1 focus:ring-[#D1A658]" value={newListing.location} onChange={e => setNewListing({...newListing, location: e.target.value})} />
                            <input placeholder="連結 URL" className="w-full p-3 rounded-xl bg-[#F3F0E6] placeholder-[#A8A095] outline-none focus:ring-1 focus:ring-[#D1A658]" value={newListing.url} onChange={e => setNewListing({...newListing, url: e.target.value})} />
                            <textarea 
                                placeholder="筆記 (例如: 房東人很好、要爬樓梯...)" 
                                className="w-full p-3 rounded-xl bg-[#F3F0E6] placeholder-[#A8A095] outline-none focus:ring-1 focus:ring-[#D1A658] resize-none h-24" 
                                value={newListing.note} 
                                onChange={e => setNewListing({...newListing, note: e.target.value})} 
                            />
                            <div className="flex gap-2 justify-end mt-2">
                                <button onClick={() => setIsAddingListing(false)} className="px-4 py-2 text-[#999] hover:text-[#5A5046]">取消</button>
                                <button onClick={handleAddListing} className="px-6 py-2 bg-[#A95C51] text-white rounded-full hover:bg-[#964B41]">儲存</button>
                            </div>
                            </div>
                        </div>
                        )}

                        {listings.map((item) => {
                        if (editingListingId === item.id) {
                            return (
                            <div key={item.id} className="bg-white p-5 rounded-3xl shadow-md border border-[#D1A658] ring-2 ring-[#D1A658]/20 space-y-3 relative animate-fade-in-up">
                                <h3 className="font-bold text-lg mb-3 text-[#A95C51] flex items-center gap-2">
                                <Edit3 size={18} /> 編輯房源
                                </h3>
                                <input placeholder="標題" className="w-full p-3 rounded-xl bg-[#F3F0E6] placeholder-[#A8A095] outline-none focus:ring-1 focus:ring-[#D1A658]" value={tempEditListing.title} onChange={e => setTempEditListing({...tempEditListing, title: e.target.value})} />
                                <input placeholder="租金 (數字)" type="number" className="w-full p-3 rounded-xl bg-[#F3F0E6] placeholder-[#A8A095] outline-none focus:ring-1 focus:ring-[#D1A658]" value={tempEditListing.price} onChange={e => setTempEditListing({...tempEditListing, price: e.target.value})} />
                                <input placeholder="地點" className="w-full p-3 rounded-xl bg-[#F3F0E6] placeholder-[#A8A095] outline-none focus:ring-1 focus:ring-[#D1A658]" value={tempEditListing.location} onChange={e => setTempEditListing({...tempEditListing, location: e.target.value})} />
                                <input placeholder="連結 URL" className="w-full p-3 rounded-xl bg-[#F3F0E6] placeholder-[#A8A095] outline-none focus:ring-1 focus:ring-[#D1A658]" value={tempEditListing.url} onChange={e => setTempEditListing({...tempEditListing, url: e.target.value})} />
                                <textarea placeholder="筆記" className="w-full p-3 rounded-xl bg-[#F3F0E6] placeholder-[#A8A095] outline-none focus:ring-1 focus:ring-[#D1A658] resize-none h-24" value={tempEditListing.note} onChange={e => setTempEditListing({...tempEditListing, note: e.target.value})} />

                                <div className="flex gap-2 justify-end mt-4 pt-3 border-t border-[#F3F0E6]">
                                <button onClick={cancelEditListing} className="px-4 py-2 text-[#999] hover:text-[#5A5046] flex items-center gap-1">
                                    <X size={16} /> 取消
                                </button>
                                <button onClick={saveEditListing} className="px-5 py-2 bg-[#A95C51] text-white rounded-full hover:bg-[#964B41] flex items-center gap-1 shadow-sm">
                                    <Save size={16} /> 儲存變更
                                </button>
                                </div>
                            </div>
                            );
                        }

                        return (
                            <div key={item.id} className="bg-white rounded-3xl p-5 shadow-sm border border-[#E3D9C8] overflow-hidden relative group">
                            <div className="flex justify-between items-start mb-2">
                                <h3 className="font-bold text-xl text-[#4A4036] flex-1 truncate pr-2">{item.title}</h3>
                                <div className="flex items-center gap-2 shrink-0">
                                <button onClick={() => startEditingListing(item)} className="text-[#C8B09C] hover:text-[#A95C51] p-1 rounded-full hover:bg-[#F3F0E6] transition-colors">
                                    <Pencil size={16} />
                                </button>
                                <div className="bg-[#F3EAD8] text-[#9C7C40] px-3 py-1 rounded-full text-sm font-bold flex items-center whitespace-nowrap">
                                    <DollarSign size={12} /> {item.price}
                                </div>
                                </div>
                            </div>

                            <div className="flex items-center text-[#8C8680] text-sm mb-4 gap-2">
                                <a 
                                href={`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(item.location)}`} 
                                target="_blank" 
                                rel="noopener noreferrer"
                                className="flex items-center gap-1 hover:text-[#A95C51] hover:underline transition-colors min-w-0"
                                >
                                <MapPin size={14} className="shrink-0" /> 
                                <span className="truncate">{item.location}</span>
                                </a>

                                {item.url && (
                                <a href={item.url} target="_blank" rel="noopener noreferrer" className="ml-2 text-[#D1A658] flex items-center gap-1 hover:underline hover:text-[#A95C51] shrink-0">
                                    ⎋ 查看更多
                                </a>
                                )}
                            </div>
                            
                            <div className="bg-[#FAF8F2] p-4 rounded-2xl mb-3">
                                <p className="text-xs font-bold text-[#B0A696] mb-2 uppercase tracking-wide">需求核對表</p>
                                <div className="grid grid-cols-2 gap-2">
                                {needs.map(need => {
                                    const isMatch = item.matches.includes(need.id);
                                    return (
                                    <button
                                        key={need.id}
                                        onClick={() => toggleMatch(item.id, need.id)}
                                        className={`
                                        text-left text-sm px-3 py-2 rounded-xl transition-all flex items-center gap-2
                                        ${isMatch 
                                            ? 'bg-[#9FA37E] text-white shadow-sm' 
                                            : 'bg-white text-[#C4C4BC] border border-[#F0EBE0]'}
                                        `}
                                    >
                                        <CheckCircle size={14} className={`shrink-0 ${isMatch ? 'text-white' : 'text-[#E0DCD0]'}`} />
                                        <span className="truncate">{need.text}</span>
                                    </button>
                                    );
                                })}
                                </div>
                                <div className="mt-3 pt-3 border-t border-[#E8E0D0] flex justify-between items-center">
                                <span className="text-xs text-[#A8A095]">符合率</span>
                                <span className="text-sm font-bold text-[#A95C51]">
                                    {needs.length > 0 ? Math.round((item.matches.length / needs.length) * 100) : 0}%
                                </span>
                                </div>
                            </div>

                            <div 
                                onClick={() => startEditingListing(item)}
                                className="text-sm text-[#7A7066] italic bg-[#F3F0E6] p-3 rounded-xl border border-transparent cursor-pointer hover:border-[#D1A658]/30 transition-colors relative group"
                            >
                                "{item.note || '暫無筆記，點擊新增'}"
                                <Pencil size={12} className="absolute bottom-2 right-2 text-[#E3D9C8] opacity-0 group-hover:opacity-100 transition-opacity" />
                            </div>

                            </div>
                        );
                        })}
                    </div>
                    )}
                </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<RentalPlanner />);
    </script>
</body>
</html>